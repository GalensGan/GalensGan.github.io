---
layout: post
category: mongoose
title: monoose常用语句总结
tagline: by 明不知昔
tags: 
  - mongodb
  - mongoose
  - js
published: true
---

从 `mysql` 转到 `mongodb` 数据库，在使用上遇到了很多问题，本遇到一个解决一个的原则，将 `mongodb` 使用的一些经验总结下来，毕竟好记性不如烂笔头。

<!--more-->

## 查询

## 聚合

### 字段是数组时，怎么匹配？

分为两种情况

- 字段是一个数组，数组里面包含的值是基本类型

  如下:

  ``` js
  {
      friends: ['zhangsan','lisi','wangwu'],
  }
  ```

  这种情况的匹配可以使用两种方式查询

  ``` js
  db.model.aggregate([
      {
     		$mathch{
      		{ friends: { $elemMatch: { $eq: 'zhangsan' } } },
  		} 
  	},
  ])
  ```

  或者：

  ``` js
  顶戴
  ```

- 字段是一个数组，数组里面包含的值是对象